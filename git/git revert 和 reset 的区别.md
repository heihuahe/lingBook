---
title: git revert 和 reset 的区别
tags: git
notebook: git
---
# git revert 和 reset 的区别
## 概述
- `git reset` 直接撤回到某个版本，那个版本之后提交的所有版本，都直接删除
- `git revert` 通过一个新的版本，来撤回之前提交的版本（可以指定版本撤回），且不影响其他的版本

## 1. `git reset`
上面说了，reset是直接撤回到某个版本，并把那个版本之后的提交都删除（提交的信息也同时删除）这是为什么呢？
看看reset的具体命令
```
// 1. 回退命令，执行完后，仓库的版本就低于远程仓库的版本了
git reset --hard <commitId>

// 2. 因为本地版本落后于远程仓库版本，所以需要强制提交 -f 就是强制提交
git push -f
```
发现了没有，**为什么会本地版本会落后于远程仓库的版本呢？**
因为git的提交是有时间线的，且有个HEAD指针式指向当前分支最新的那个版本，而reset的作用就是更改这个HEAD指针，让它指到前面的某个版本了，这样之后提交的版本就都被撤回了。
### 缺点
而且由于是强制提交的，提交上去，会导致远程仓库版本低于（不是执行强制提交的那个操作者）的本地仓库，这样就需要对本地仓库进行调整。（拉取啊什么的，会折腾好一会）

因为git版本的提交前提是，**本地仓库版本要优先于远程仓库！请记住这一点**

## 2. `git revert`
上面说了，这是通过新创建一个版本，来撤回某个版本的提交。（哎 这个具体原理我还不懂，但是表面上看上去是这样的）
git revert的操作(撤回单个版本)
```
// 撤回某个具体版本
git revert <commitId>
// 提交
git push
```
注意到没有！这里有个很不一样的地方，这里的push不用强制`-f`！ 那是因为这是新建了一个版本，所以在本质上，本地仓库的版本还是优先于远程仓库的，所以是可以正常push的。
而且这里有个很好的地方，这个撤回不会影响之前的提交记录，就是在提交历史中，那个要被我们撤回的那个版本的提交记录还在，只是在最新提交的版本中，加了个撤回的提交，这个真的非常棒啊！
具体效果像这样：
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20191227165105.png)

不仅如此，revert还可以撤回多个连续或者不连续的版本！然后合并到一个提交。你说优不优秀！
## 参考资料
- [Git恢复之前版本的两种方法reset、revert（图文详解）(CSDN-游笑天涯)](https://blog.csdn.net/yxlshk/article/details/79944535)
