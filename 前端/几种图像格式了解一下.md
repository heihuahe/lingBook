---
title: 几种图片格式了解一下
tags: 图片
notebook: 前端
---
# 几种图片格式了解一下

### 什么是合适的图片？
很多网站，其实影响加载速度最大的还是图片，因为网站上会有相当大的图片资源，所以选择恰当的图片格式对网站加载速度影响重大。
所以常见的优化图片资源有这么几种策略：
- 懒加载
- 图片优化（这就是我们要讲的）
- ....

那么，哪种图片在什么场景下才是最恰当的呢？
### 矢量图和位图
首先，先来了解下图片的两种形式。
- **位图（点阵图）**
  - 由一个个**像素点**组成
  - 图片放大**会失真**
- **矢量图**
  - 图片上记录了元素形状及颜色的算法
  - 图片放大**不会失真**。
> **什么叫失真？**
> 当图片放大到一定程度会出现马赛克的现象就是失真，像素越高越不容易失真。
> 理论上来说：就是因为图片在转存的过程中图像信息丢失而产生的图像质量下降的现象。

![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20190527152347.png)
#### 位图
位图，又称点阵图或栅格图，由像素点组成。  
位图又分为8、16、24和32位。(这是位图的基本属性)
比如：**8位图**，就是指图片有2<sup>8</sup>（即256）种颜色。  
一般来说，从人眼的感觉来说，**16位图**（2<sup>16</sup>）基本能满足需求了。  
**24位图**，又称作“真彩色”，这几乎是人眼可以分辨颜色的极限了。  
**32位图**，其实也是2<sup>24</sup>种颜色，它在24位图的基础上增加了2<sup>8</sup>颜色的灰度，也就是8位的透明度。  
一般肉眼很难分辨24位图和32位图的区别，所以通常来说会选择将图片保存为24位，不仅图片质量好，而且图片也不大。  
总结： 8位 = 2<sup>8</sup> = 256  
 16位 = 2<sup>16</sup>= 65536  
  24位 = 2<sup>24</sup>= 16777216  
  32位 = Alpha透明度 + 2<sup>24</sup>  
> 位图的文件大小和图形面积和文件色彩丰富度成正比。图片体积越大，图片色彩越丰富，图片越大。
##### 优缺点
优点：利于显示色彩层次丰富的写实图像；
缺点：放大/缩小图片，都会使图片失真。因为其本质是增加/减少图片中的像素数量。  
##### 位图的绘图工具
PhotoShop（简称：PS）  
常见的几种格式：
- jpg
- png
- webp
- gif（现在常用于动画）
> 虽然以上都是位图，但是不同格式的图像在记录这些数据时的方式却不一样，这就涉及到**有损压缩和无损压缩**的区别。
##### 使用建议
**处理色调复杂的图像时，比如照片/图画，建议使用JPG格式；制作logo和简单的线条构图时，建议使用png格式**
#### 矢量图
矢量图是以一种数学描述的方式来记录图像内容的图像格式，主要是通过点、线、面。边框等信息基于计算的方式来显示图像的。
> 图片体积大小与图片中元素的个数和每个元素的复杂程度成正比，而与图片面积和色彩的丰富程度无关。
##### 优缺点
优点： 不管怎么缩放，都不会失真；
缺点： 难以表现色彩层次丰富的图像。
缺点： 很难表现自然度高的写实图像
##### 使用建议
**一般在制作logo或图标时，才会使用矢量图。**
其实，矢量图**主要用于印刷行业**，因为矢量图放大不会失真，印刷时就不会出现毛边/模糊的情况。

常见的几种格式：
- svg
- ai
每次显示图片都是重新执行了图片上的算法，因为每次都是重绘，所以即使画面缩放了，也**不会失真**。
> 注意： 我们在web页面上使用的图像基本都是位图，即使有些是矢量图形，也是指通过矢量工具进行绘制然后转成位图格式在web上使用的.(区别于像素绘制的图形)
##### 绘图工具
- Adobe公司的illustrator（简称：AI）
- Corel的CorelDRAW


### 矢量图与位图的格式互换
矢量图可以很轻松的转换为位图，但是位图转换成矢量图就需要复杂而庞大的数据处理，而且生成的矢量图的质量绝对不能和原来的图形比拟。
### 有损压缩与无损压缩
#### 有损压缩（你看到的不一定是真实的）
有损压缩就是在存储图像的时候并不完全真实的记录图像上每个像素点的数据信息，他会根据人眼观察现实世界的特性（人眼对光线的敏感度比对颜色的敏感度要高，生物实验证明当颜色缺失时人脑会利用与附近最接近的颜色来自动填补缺失的颜色）对图像数据进行处理，去掉那些图像上会被人忽略的细节，然后**使用附近的颜色通过渐变或其他形式进行填充**。这样既能大大降低图像信息的数据量，又不会影响图像的还原效果。（具体看图）
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20190527171432.png)
##### 比如：jpg
jpg是我们最常见的采用有损压缩对图像信息进行处理的图片格式。
处理原理：
在存储图像时会把图像分解成8*8像素的栅格，然后对每个栅格的数据进行压缩处理，当我们放大一副图像的时候，就会发现这些8*8像素栅格中的很多细节都被去除了，而通过一些特殊的算法用附近的颜色进行填充。**这就是为什么用JPG存储图像时有时会产生块状模糊的原因**

#### 无损压缩（最精确的拼图）
无损压缩就是真实地记录图像上每个像素点的数据信息，但是为了压缩图像文件的大小会采取一些特殊的算法。
##### 压缩原理
先判断图像上那些区域的颜色是相同的，哪些是不同的，然后把这些相同的数据信息进行压缩记录。
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20190527173120.png)
##### 比如：PNG
PNG就是一种采用无损压缩的图片格式。无损压缩先判断图像上哪些地方是相同的哪些地方是不同，然后对图像上出现的颜色进行索引，这些颜色就是*索引色**
##### 既然是无损压缩了，为什么还会出现失真的情况呢？
因为无损压缩只是指这个压缩方式可以尽可能的真实的还原图像，但是根据其原理，它是通过索引图像上的相同区域的颜色进行压缩和还原的，这就意味着**只有在图像上出现的颜色数量小于我们可以保存的颜色数量时，我们才能真实的记录和还原图像**，否则就会丢失一些图像信息。  
而有损压缩，不管图像上的颜色多少，都会损失部分图像信息。
- PNG格式最多可以保持成48位图
### 图片格式
- jpg
- png
- webp
- gif
- svg

#### JPG
JEPG和JPG其实是一样的。
可以很好地处理大面积色调的图片。比较自然的图片。
jpg是使用有损压缩的，在存档的时候，图片的一些内容会遭到永久性的破坏，压缩比例越高，破坏越大。
特点：
- 透明性： 不支持透明
- 动画： 不支持
##### 两种保存方式
jpg保存的时候，可以选择不同的保存方式。
jpg有两种保存方式：
- Baseline JEPG（标准型）
  - 从上到下逐渐显示
- Progressive JEPG（渐进式）
  - 先显示图片轮廓，再逐渐变清晰
这两种的区别就是二者显示的方式不同。
###### Baseline JEPG
文件存储方式是按从上到下的扫描方式，把每一行顺序的保存在JPEG文件中。显示的时候，就是按照存储的顺序，从上到下一行行的显示出来。这是常见的文件加载方式，如果图片较大的时候，就会看到图片一行行加载的情况，体验较差。推荐使用渐进式
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/640.gif)
**ps怎么保存？**
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/637080-20151008160715581-562789271.png)
##### Progressive JEPG(推荐)
文件存储方式是通过多次扫描，逐步把图片信息扫描进去。显示的时候，先显示这个图片的模糊轮廓，随着扫描次数的增加，图片变得越来越清晰。
这个的优点是：在网络较慢/图片较大的时候，可以先看到图片的大致轮廓，比标准式的体验好了很多。
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/640-2.gif)
**ps怎么保存？**
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/637080-20151008154925659-114664999.png)
> 注意：渐进式图片在IE里的变现是相当糟糕的，对于渐进式图片，IE浏览器根本不预先显示低分辨率的模糊图片轮廓，而是一片空白。当图片完全加载完后，才会一下显示整张图片。这个用户体验挺差的。
#### PNG
png是专门为web创造的图像，通常在制作logo或一些图标时，都是用png。
与JPG的区别就是，**png支持透明信息**。就是图像可以浮现在页面上，周围空白的部分都是透明色，在网页上看不见。
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20190527161301.png)
特点：
- 图片体积小
- 无损压缩
- 压缩比率很高
- 可渐变透明
- 支持渐进式显示（这个由保存图片时候决定的）
##### 优缺点
优点：支持**逐次式显示（progressive display）**：传输图像文件的同时，可以先把整个轮廓显示出来，然后逐步显示图像的细节。即先显示低分辨率显示图像，从模糊到清晰，然后逐步提高它的分辨率。这是一个很好的用户体验。
> PNG 最初的开发目的是作为GIF的替换方案，所以它同样使用了无损压缩。
###### 怎么保存成渐进式？
png的渐进其实就是交错。
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/637080-20151008155644768-712974691.png)
#### GIF 
只支持256色以内的图像，也就是8位图。所以gif的图片效果很差。一般来说都是用来制作动画的。
但是如果图片只有很单调的色彩，没有渐变色，用GIF就最适合了！
特点：
- 体积小
- 极好的压缩效果-无损压缩
- 水平扫描，使用LZW算法进行压缩，当压缩gif时，像素是从上到下水平压缩的，也就是说，面积相同的gif图片，横向的比纵向的更小。
- 支持动画
- 支持透明效果（没有png的渐变透明强大）
  - 它是一种布尔透明类型，支持全透明和全不透明，不支持半透明（alpha透明）
- 支持可选择性的间隔渐进显示
###### 怎么保存成渐进式？
gif的渐进其实也是交错。所以就用了png的图片，哈哈哈哈。
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/637080-20151008155644768-712974691.png)
#### WebP  
这是谷歌开发的一种新的图片格式。这是一种位图
特点：
- 支持有损压缩和无损压缩
- 使用直接色
- 支持透明度
- 体积小
  - （无损压缩）相同质量的WebP图片，文件大小比PNG小26%；
  - （有损压缩）相同质量的WebP图片，文件大小比JPG小25~34%；  


这是一款专门为web而生的图片，就是说相同质量的图片，webp文件大小更小。WebP集**多种图片文件格式的优点于一身**，但是webP有个缺点，就是兼容性问题，所以目前没有大规模使用。
目前只有火狐的几个版本才支持，**IE和Safari的所有版本都不支持**
#### 使用方法
如果还是想使用的话，就要解决兼容性问题，针对IE和Safari可以采用降级的方法处理。
就是图片在Chrome打开，图片后缀是`.jpg_.webp`,但是Safari打开就是`.jpg`
#### APNG
这是基于PNG格式扩展的一种动画格式，增加了对动画图片的支持，同时加入了24位图像和8位Alpha透明度的支持。也就是说动画的形式更多样了。**但是这个目前没有获得PNG组织官方的认可**
兼容性问题相较WebP会好很多，大部分浏览器都支持。
#### SVG
svg是一种用XML定义的语言，用来描述二维矢量及矢量/栅格图形。 是矢量图，不会失真。 
svg提高了3种类型的图形对象：
- 矢量图形（比如：由直线和曲线组成的路径）
- 图像
- 文本

图形对象还可以进行分组，添加样式，变换，组合等操作，特征集包括嵌套变换，剪切路径，alpha蒙版，滤镜效果，模版对象和其他扩展。

了解图片的根本目的是为了优化图片，优化网页的加载速度。所以来看看在开发的时候该怎么从图片本身入手进行优化。
### 优化图片
#### 错误示范
有时候，我们只要一个`500*300` 的大小图片，但是给了一个`1000*600` 的图片，这时候（在优化前）我们一般是不在意的，直接用css在网页上调整图片大小就好了，但是问题是，浏览器其实还是加载了这个大了2倍的图片，这样其实是加重了浏览器的负担和拖慢了网页的加载速度，如果图片多的话，对用户来说其实体验相当差的。  
那么怎么从图片入手优化图片呢？（看下面）
#### 图片使用建议（优化）
- 减少图片周围的空白。
  - 删除图片周围的任何空白，若需要，用css来填充。
- 使用正确的文件格式。
  - 如果是图标，或者没有太多颜色的图形，可以保存为PNG格式的（PNG格式优于GIF格式）；
  - 如果是较小/简单的图形，比如小于`10*10`像素的图片或者调色板小于3色的图片，以及动画建议使用GIF格式；
  - 如果是照片或者色彩丰富的，比如照片，用jpg效果会好一点；
  - 请勿使用BMP格式或TIFF格式。
- 用适当的尺寸保存图片。
  - 如果你现在用html和css来调整图片的话，看到这里，你就该懂得，你该改了。多大大小就放多大的图片。从而减少文件的大小。（不要像上面的错误示范那样）
### 参考资料
- [图片格式(绿叶学习网——helicopter)](http://www.lvyestudy.com/les_hj/hj_7.3.aspx)
- [【转】前端切图该保存为什么格式？(博客园——吕大豹)](https://www.cnblogs.com/lvdabao/articles/3042849.html)
- [优化图片](http://pagespeed.webkaka.com/docs/OptimizeImages.html)
- [每个前端工程师都应该了解的图片知识(长文建议收藏)(微信公众号-前端桃园)]