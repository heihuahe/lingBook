---
title: SPA,SSR是什么？
tags: 
notebook: 前端
---
# SPA,SSR是什么？
## 概述
先来了解下这个概念，SPA就是单页面应用，SSR就是服务端渲染，他们之前的区别就是SEO（搜索引擎优化）  
那么就先来了解下，什么是SEO吧。

## 1. SEO的介绍
SEO的全称是**Search Engine Optimization**，就是搜索引擎优化，是通过搜索引擎结果来增加网站浏览量的数量和质量。

这怎么解释呢，
### 1.1 什么叫浏览量的质量？
就是有效的浏览量，假设，你的网站是用来售卖苹果的，关键字就是苹果，那么在搜索引擎上输入“苹果”，就会出现和苹果相关的网站，但是大多数应该都是iPhone的苹果，所以就有歧义了，这个苹果到底是什么意思？所以，这就会造成，有可能搜索方是要找iPhone的相关信息，结果进来你的网站，发现和自己要找的不一样，就立刻出去，这样的流量就是**无效流量**。  
那什么是有效的流量？  
就是不仅进来浏览了你的网站，而且买了你所售卖的苹果，这就是**有效流量**。
**增加浏览量的质量，就是增加有效的流量**。

### 1.2 google搜索引擎搜索结果分布页
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/paid-vs-organic-listings.png)
蓝色区域都是提供购买的的广告区域，黄色部分才是我们的自然搜索结果区域（就是不用付费的），我们要争夺的，就是这块区域！正常来说都是越靠前，点击量和浏览量越多的，自然而然，流量的转化率也相对高一些。

### 1.3 SEO是怎么搜索的？
工作原理：谷歌（或者其他搜索引擎）有个爬虫工具可以从网络上获取所有它能找到的信息，爬虫把这些信息在0-1s内返回给搜索引擎去建立索引库，再由检索器根据用户输入的关键字，再索引库中快速搜索出文档，再根据关键字匹配度算法进行排序，最后将排序结果返回给用户。

## 2. SPA介绍
SPA 全称：**single-page application**,就是单页面应用。它是一种网络应用程序模型(WebApp)  
什么是单页面应用？  
在传统的html+css+js中，不同页面之间的切换都是直接从服务器加载一整个新的页面，切换的时候，就有**整个页面刷新**了一下的感觉；单页面应用，就是通过动态地重写页面的部分与用户交互，而避免了过多的数据交换，响应速度就相对来说快一些，直观地体验就是，切换页面的时候除了内容部分，导航啊什么都不会被刷新，就感觉**只有内容块刷新**了一下。（具体体验，可以看知乎网页版。）
### 2.1 相关框架
常见的有这么三种：AngularJS，React，Vue
### 2.2 SPA的优缺点
优点：  
1. 页面切换很快
2. 一定程度上减少了后端服务器的压力
3. 前后端分离很完整，前端通过AJAX获取数据从而进行页面渲染，后端只需要考虑接口的实现，不用考虑如何使用

缺点：   
1. 首屏打开速度很慢，因为用户首次加载需要先下载SPA框架及应用程序的代码，然后再渲染页面。
  这里的解决方案有：预加载
2. 不利于SEO，因为搜索引擎的爬虫虽然支持执行JS和通过AJAX获取数据，但是其对异步数据的支持还不够，所以在SPA页面中，就很难保证其页面能被搜索引擎收录到。SEO对于那些以内容输出为主的网站来说，是至关重要的。比如豆瓣，知乎等

所以这时候，如果你是内容输出网站，你就要考虑下一个方案（SSR）了。
## 3. SSR的介绍
SSR的全称是**Server-Side Rendering**，就是服务端渲染

### 3.1 什么叫做服务端渲染？客户端渲染？
就比如说Vue和React，它们就是属于一种**客户端渲染**，就是前后段分离的开发模式，后端提供接口给前端，前端拿到这个接口数据后，在前端进行html页面的拼接，然后显示在浏览器上；  
而**服务端渲染**，是将一个Vue组件，在服务端渲染为HTML字符串，然后直接发送给浏览器，浏览器拿到这个html文件之后就可以直接解析展示了。  
明白了吗？ 简单来说，就是看html渲染的位置，是在服务端还是浏览器端

### 3.2 如何判断一个网页是否为服务器端渲染？

举个例子，京东商品列表和详情页的区别    
操作都是： 鼠标右键查看源代码 
#### 京东商品列表页
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20191126102731.png)
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20191126103407.png)
可以看到页面中的描述在源代码里也能看到，这就是服务器端渲染，页面直接由服务器端渲染，在浏览器直接解析html显示。这样便于SEO
#### 京东商品详情页
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20191126103104.png)
![](https://raw.githubusercontent.com/heihuahe/myGallery/master/noteImage/20191126103046.png)
可以看出，评论信息在页面源代码中是没有的，但是在页面在能看到，这就是客户端渲染，由前端拼接json数据，并在浏览器端渲染，因为在网页源代码中看不到数据的信息，所以不利于SEO。

**总结**
从上面两个例子中，可以很明显的看出浏览器端渲染和客户端渲染之间的区别，同时也看到了他们的使用场景，所以说如果一个网站二选一地说，要用ssr还是spa是非常不理智的！因为到底要怎么用这两个还是要根据当前场景来判断的，**大多数还是两者相结合的使用的**！就比如我们刚刚看到的京东。
### 3.3 SSR常用框架
- React 的Next
- Vue 的额Nuxt

### 3.4 SSR的优缺点
优点：  
1. 更快的响应速度
2. SEO较友好
3. 解决了SPA的首屏加载较慢的问题

缺点：  
1. 增加服务器压力
2. 开发难度增大
3. 调试会比较麻烦
4. 一些常用的浏览器API可能无法正常使用，比如`window`,`document`等，使用需要对允许的环境进行判断。

## 除了SSR，还有什么优化首屏加载优化方案？
- 进度条，加载中动图或者骨架屏等
- CDN资源加载
等等等（因为这也是个大话题，这里就不具体介绍了，你只要知道还是有其他解决首屏加载慢的问题的方法的！）
## 参考资料
- [What is SEO? (moz)](https://moz.com/learn/seo/what-is-seo)
- [浅谈SPA、SEO、SSR(简书——staneyffer)](https://www.jianshu.com/p/fcb98533bc18)
- [如何快速判断页面是服务端渲染还是客户端渲染(博客园——陈亚)](https://www.cnblogs.com/chenyablog/p/9321350.html)